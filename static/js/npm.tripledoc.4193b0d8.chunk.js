(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{169:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(170),u=n.n(r),i=n(18),o=n.n(i),a=n(108),c=n(45),l=n(107),f=n(162),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function d(e,t,n,r){return new(n||(n=Promise))((function(u,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){e.done?u(e.value):new n((function(t){t(e.value)})).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(u=2&i[0]?r.return:i[0]?r.throw||((u=r.return)&&u.call(r),0):r.next)&&!(u=u.call(r,i[1])).done)return u;switch(r=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(u=(u=o.trys).length>0&&u[u.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){o.label=i[1];break}if(6===i[0]&&o.label<u[1]){o.label=u[1],u=i;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(i);break}u[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(a){i=[6,a],r=0}finally{n=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function p(e){return d(this,void 0,void 0,(function(){var t,n;return g(this,(function(r){switch(r.label){case 0:return"text/turtle",t=new a.a({format:"text/turtle"}),n=e.map((function(e){return c.a.triple(e.subject,e.predicate,e.object)})),t.addQuads(n),[4,new Promise((function(e,n){t.end((function(t,r){if(t)return n(t);e(r)}))}))];case 1:return[2,r.sent()]}}))}))}function h(e,t){return d(this,void 0,void 0,(function(){var n;return g(this,(function(r){return"text/turtle",n=new l.a({format:"text/turtle",baseIRI:t}),[2,new Promise((function(t,r){var u=[];n.parse(e,(function(e,n,i){if(e)return r(e);n?u.push(n):t(u)}))}))]}))}))}function v(e){return d(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,o.a.fetch(e,{headers:{Accept:"text/turtle"}})];case 1:return[2,t.sent()]}}))}))}function w(e){return d(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,o.a.fetch(e,{method:"HEAD"})];case 1:return[2,t.sent()]}}))}))}function m(e,t,n){return d(this,void 0,void 0,(function(){var r,u,i,a;return g(this,(function(c){switch(c.label){case 0:return[4,p(t)];case 1:return r=c.sent(),[4,p(n)];case 2:return u=c.sent(),i=t.length>0?"DELETE DATA {"+r+"};":"",a=n.length>0?"INSERT DATA {"+u+"};":"",[4,o.a.fetch(e,{method:"PATCH",body:i+" "+a,headers:{"Content-Type":"application/sparql-update"}})];case 3:return[2,c.sent()]}}))}))}function y(e,t){return d(this,void 0,void 0,(function(){var n;return g(this,(function(r){switch(r.label){case 0:return[4,p(t)];case 1:return n=r.sent(),[4,o.a.fetch(e,{method:"PUT",body:n,headers:{"Content-Type":"text/turtle","If-None-Match":"*"}})];case 2:return[2,r.sent()]}}))}))}function b(e,t,n){return void 0===n&&(n={}),d(this,void 0,void 0,(function(){var r,u;return g(this,(function(i){switch(i.label){case 0:return[4,p(t)];case 1:return r=i.sent(),u={"Content-Type":"text/turtle"},n.slugSuggestion&&(u.slug=n.slugSuggestion),[4,o.a.fetch(e,{method:"POST",body:r,headers:u})];case 2:return[2,i.sent()]}}))}))}function S(){return function(e){var t={addAll:function(n){var r=Array.isArray(n)?n:n.toArray();return e.addQuads(r),t},match:function(t,n,r,u){var i="undefined"===typeof t?null:t,o="undefined"===typeof n?null:n,a="undefined"===typeof r?null:r,c="undefined"===typeof u?null:u;return{toArray:function(){return e.getQuads(i,o,a,c)}}},toArray:function(){return e.getQuads(null,null,null,null)}};return t}(new f.a)}var T=c.a,A=function(e,t,n){return function(e,t,n,r,u){var i=n?j(n):null,o=r?j(r):null,a=u?j(u):null,c=e.match(i,o,a,null).toArray().find((function(e){return"undefined"!==typeof e[t]}));return"undefined"!==typeof c?D(c[t]):null}(e,"subject",null,t,n)},R=function(e,t,n){return N(e,"subject",null,t,n)};function N(e,t,n,r,u){var i=n?j(n):null,o=r?j(r):null,a=u?j(u):null;return e.match(i,o,a,null).toArray().filter((function(e){return"undefined"!==typeof e[t]})).map((function(e){return D(e[t])})).filter(L)}function j(e){return"string"===typeof e?T.namedNode(e):e}function D(e){return"BlankNode"===e.termType?e:function(e){return"NamedNode"===e.termType}(e)?e.value:J(e)?e:null}function L(e){return null!==e}function x(e,t){var n=K(t)?t:T.namedNode(t),r=function(e){return"function"===typeof e.getTriples}(e)?e.getStore().match(n,null,null,null).toArray():[],u=S();u.addAll(r);var i=[],o=[],a=function(e){return function(e,t,n){return N(e,"object",t,n,null)}(u,t,e)},c=function(e){var t=a(e).find(z);return"undefined"===typeof t?null:t},l=function(e){return a(e).filter(z)},f=function(e,t){i.push(T.triple(n,T.namedNode(e),O(t)))},s=function(e,t){if("string"!==typeof t)throw new Error("The given value is not a string.");return f(e,t)},d=function(e,t,r){if("string"!==typeof t)throw new Error("The given value is not a string.");i.push(T.triple(n,T.namedNode(e),T.literal(t,r)))},g=function(e,t){if("number"!==typeof t||!Number.isInteger(t))throw new Error("The given value is not an integer.");return f(e,t)},p=function(e,t){if("number"!==typeof t)throw new Error("The given value is not a decimal.");i.push(T.triple(n,T.namedNode(e),T.literal(t.toString(),T.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))))},h=function(e,t){if(t instanceof Date===!1)throw new Error("The given value is not a DateTime.");return f(e,t)},v=function(e,t){i.push(T.triple(n,T.namedNode(e),T.namedNode(t)))},w=function(e,t){o.push(T.triple(n,T.namedNode(e),T.namedNode(t)))},m=function(e,t){o.push(T.triple(n,T.namedNode(e),O(t)))},y=function(e){o.push.apply(o,u.match(n,T.namedNode(e),null,null).toArray())},b=function(e,t){y(e),v(e,t)},A=function(){return u.match(n,null,null,null).toArray()},R=function(){return K(t)?t.value:t};return{getDocument:function(){return e},getTriples:A,getString:function(e){var t=a(e).find(Y);return"undefined"===typeof t?null:t.value},getLocaleString:function(e,t){var n=a(e).find(G(t));return"undefined"===typeof n?null:n.value},getInteger:function(e){var t=a(e).find(W);return"undefined"===typeof t?null:U(t)},getDecimal:function(e){var t=a(e).find($);return"undefined"===typeof t?null:E(t)},getDateTime:function(e){var t=a(e).find(_);return"undefined"===typeof t?null:I(t)},getLiteral:function(e){var t=a(e).find(J);return"undefined"===typeof t?null:k(t)},getAllStrings:function(e){return a(e).filter(Y).map(C)},getAllLocaleStrings:function(e,t){return a(e).filter(G(t)).map(C)},getAllIntegers:function(e){return a(e).filter(W).map(U)},getAllDecimals:function(e){return a(e).filter($).map(E)},getAllDateTimes:function(e){return a(e).filter(_).map(I)},getAllLiterals:function(e){return a(e).filter(J).map(k)},getLocalSubject:function(t){var n=a(t).find(K);return"undefined"===typeof n?null:x(e,n)},getAllLocalSubjects:function(t){return a(t).filter(K).map((function(t){return x(e,t)}))},getRef:c,getAllRefs:l,getType:function(){return c("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")},addString:s,addLocaleString:d,addInteger:g,addDecimal:p,addDateTime:h,addRef:v,removeAll:y,removeString:function(e,t){if("string"!==typeof t)throw new Error("The given value is not a string.");return m(e,t)},removeLocaleString:function(e,t,r){if("string"!==typeof t)throw new Error("The given value is not a string.");o.push(T.triple(n,T.namedNode(e),T.literal(t,r)))},removeInteger:function(e,t){if("number"!==typeof t||!Number.isInteger(t))throw new Error("The given value is not an integer.");return m(e,t)},removeDecimal:function(e,t){if("number"!==typeof t)throw new Error("The given value is not a decimal.");o.push(T.triple(n,T.namedNode(e),T.literal(t.toString(),T.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))))},removeDateTime:function(e,t){if(t instanceof Date===!1)throw new Error("The given value is not a DateTime.");return m(e,t)},removeRef:w,setRef:b,setString:function(e,t){y(e),s(e,t)},setLocaleString:function(e,t,n){y(e),d(e,t,n)},setInteger:function(e,t){y(e),g(e,t)},setDecimal:function(e,t){y(e),p(e,t)},setDateTime:function(e,t){y(e),h(e,t)},clear:function(){o.push.apply(o,A())},getPendingTriples:function(){return[o,i]},asRef:R,getNodeRef:c,getAllNodeRefs:l,addNodeRef:v,addLiteral:f,removeNodeRef:w,removeLiteral:m,setNodeRef:b,setLiteral:function(e,t){y(e),f(e,t)},asNodeRef:R}}function I(e){var t=parseInt(e.value.substring(0,4),10),n=parseInt(e.value.substring(5,7),10)-1,r=parseInt(e.value.substring(8,10),10),u=parseInt(e.value.substring(11,13),10),i=parseInt(e.value.substring(14,16),10),o=parseInt(e.value.substring(17,e.value.indexOf("Z")),10),a=new Date(0);return a.setUTCFullYear(t),a.setUTCMonth(n),a.setUTCDate(r),a.setUTCHours(u),a.setUTCMinutes(i),a.setUTCSeconds(o),a}function U(e){return parseInt(e.value,10)}function E(e){return parseFloat(e.value)}function C(e){return e.value}function k(e){return _(e)?I(e):W(e)?U(e):$(e)?E(e):e.value}function O(e){if(e instanceof Date){var t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)).toISOString().replace(/\.000Z$/,"Z");return T.literal(t,T.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"))}return"number"===typeof e&&Number.isInteger(e)?T.literal(e.toString(),T.namedNode("http://www.w3.org/2001/XMLSchema#integer")):"number"!==typeof e||Number.isInteger(e)?T.literal(e.toString()):T.literal(e.toString(),T.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))}function M(e,t,n){var r=this,u=Z(t,n),i=function(){return n.documentRef},o=s(s({},u),{save:function(u){return void 0===u&&(u=Object.values(t.getAccessedSubjects())),d(r,void 0,void 0,(function(){var t,r,i,a,c,l;return g(this,(function(f){switch(f.label){case 0:return t=q(u,o,e),[4,y(n.documentRef,t.allAdditions)];case 1:return(i=f.sent()).ok?[3,3]:[4,i.text()];case 2:throw a=f.sent(),new Error(a);case 3:return r=s(s({},n),{existsOnPod:!0}),(c=H(i,n.documentRef))&&(r.aclRef=c),(l=i.headers.get("Updates-Via"))&&(r.webSocketRef=l),[2,V(t.newTriples,r)]}}))}))},asRef:i,asNodeRef:i});return t.setDocument(o),o}var P=function(e,t){return function(n,r){return e(t,n,r)}},X=function(e,t){return function(n,r){return e(t,n,r)}};function F(e){return d(this,void 0,void 0,(function(){var t,n,r,u,i,o;return g(this,(function(a){switch(a.label){case 0:return t=new URL(e),[4,v(n=t.origin+t.pathname+t.search)];case 1:if(!1===(r=a.sent()).ok)throw new Error("Fetching the Document failed: "+r.status+" "+r.statusText+".");return[4,r.text()];case 2:return[4,h(a.sent(),n)];case 3:return u=a.sent(),i=H(r,n),o=r.headers.get("Updates-Via"),[2,V(u,{aclRef:i,documentRef:n,webSocketRef:o||void 0,existsOnPod:!0})]}}))}))}function H(e,t){var n,r=e.headers.get("Link");if(r&&u.a){var i=u.a.parse(r).get("rel","acl");1===i.length&&(n=new URL(i[0].uri,t).href)}return n}function Q(e){return"string"===typeof e.documentRef}function V(e,t){var n=S();n.addAll(e);var r=function(){var e,t={};return{getSubject:function(n){return n="function"===typeof e.asRef?new URL(n,e.asRef()).href:n,t[n]||(t[n]=x(e,n)),t[n]},setDocument:function(t){e=t},getAccessedSubjects:function(){return t}}}();return Q(t)?function(e){return!0===e.existsOnPod}(t)?function(e,t,n){var r=this,u=M(e,t,n),i=function(){return n.aclRef||null},o=function(n,r){return X(R,e)(n,r).filter(z).map(t.getSubject)},a=function(e){return o("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",e)},c=function(){return e.toArray()},l=s(s({},u),{save:function(u){return void 0===u&&(u=Object.values(t.getAccessedSubjects())),d(r,void 0,void 0,(function(){var t,r,i,o;return g(this,(function(a){switch(a.label){case 0:return t=q(u,l,e),[4,m(n.documentRef,t.allDeletions,t.allAdditions)];case 1:return(i=a.sent()).ok?[3,3]:[4,i.text()];case 2:throw o=a.sent(),new Error(o);case 3:return r=s(s({},n),{existsOnPod:!0}),[2,V(t.newTriples,r)]}}))}))},removeSubject:function(e){return t.getSubject(e).clear()},getSubject:t.getSubject,getAllSubjectsOfType:a,findSubject:function(n,r){var u=P(A,e)(n,r);return u&&z(u)?t.getSubject(u):null},findSubjects:o,getAclRef:i,getWebSocketRef:function(){return n.webSocketRef||null},experimental_getAllSubjects:function(){var n=N(e,"subject",null,null,null).filter(z);return Array.from(new Set(n)).map((function(e){return t.getSubject(e)}))},getStore:function(){return e},getTriples:c,getAcl:i,getStatements:c,getSubjectsOfType:a});return t.setDocument(l),l}(n,r,t):M(n,r,t):function(e,t,n){var r=this,u=Z(t,n),i=s(s({},u),{save:function(u){return void 0===u&&(u=Object.values(t.getAccessedSubjects())),d(r,void 0,void 0,(function(){var t,r,o,a,c,l,f,d,p;return g(this,(function(g){switch(g.label){case 0:return t=q(u,i,e),[4,b(n.containerRef,t.allAdditions)];case 1:return o=g.sent(),a=o.headers.get("Location"),o.ok&&null!==a?[3,3]:[4,o.text()];case 2:throw c=g.sent(),new Error(c);case 3:return l=new URL(a,new URL(n.containerRef).origin).href,r=s(s({},n),{containerRef:void 0,documentRef:l,existsOnPod:!0}),[4,w(l)];case 4:return f=g.sent(),(d=H(f,l))&&(r.aclRef=d),(p=f.headers.get("Updates-Via"))&&(r.webSocketRef=p),[2,V(t.newTriples,r)]}}))}))}});return t.setDocument(i),i}(n,r,t)}function Z(e,t){return{addSubject:function(n){var r=void 0===n?{}:n,u=r.identifier,i=void 0===u?B():u,o=r.identifierPrefix,a=void 0===o?"":o,c=(Q(t)?t.documentRef:"")+"#"+a+i;return e.getSubject(c)}}}function q(e,t,n){var r=e.filter((function(e){return e.getDocument()===t})).reduce((function(e,t){var n=e[0],r=e[1],u=t.getPendingTriples(),i=u[0],o=u[1];return[n.concat(i),r.concat(o)]}),[[],[]]),u=r[0],i=r[1],o=n.toArray().concat(i).filter((function(e){return-1===u.findIndex((function(t){return t.equals(e)}))}));return{allAdditions:i,allDeletions:u,newTriples:o}}var B=function(){return Date.now().toString()+Math.random().toString().substring("0.".length)};function J(e){return"object"===typeof e&&null!==e&&"string"===typeof e.termType&&"Literal"===e.termType}function Y(e){return J(e)&&"http://www.w3.org/2001/XMLSchema#string"===e.datatype.value}function G(e){return function(t){return function(e,t){return J(e)&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===e.datatype.value&&e.language.toLowerCase()===t.toLowerCase()}(t,e)}}function W(e){return J(e)&&"http://www.w3.org/2001/XMLSchema#integer"===e.datatype.value}function $(e){return J(e)&&"http://www.w3.org/2001/XMLSchema#decimal"===e.datatype.value}function _(e){return J(e)&&"http://www.w3.org/2001/XMLSchema#dateTime"===e.datatype.value}function z(e){return"string"===typeof e&&!J(e)}function K(e){return"object"===typeof e&&null!==e&&"string"===typeof e.termType&&"BlankNode"===e.termType}}}]);
//# sourceMappingURL=npm.tripledoc.4193b0d8.chunk.js.map